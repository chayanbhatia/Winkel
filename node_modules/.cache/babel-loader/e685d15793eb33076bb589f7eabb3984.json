{"ast":null,"code":"import _slicedToArray from\"/Users/alizahir/Documents/Programming/Web Development /Personal-projects/Winkel-eCommerce/winkel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import styles from'../css/cart.module.css';import UserContext from'./UserContext';import firebase from'../config/Firebase';var Cart=function Cart(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),Cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),Loading=_useState4[0],setLoading=_useState4[1];var _useContext=useContext(UserContext),User=_useContext.User;var db=firebase.firestore();var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),Total=_useState6[0],setTotal=_useState6[1];useEffect(function(){if(User){db.collection('users').doc(User.uid).get().then(function(data){setCart(data.data().cart);}).then(function(){setLoading(false);});}},[User]);useEffect(function(){if(Cart){db.collection('users').doc(User.uid).set({cart:Cart},{merge:true});console.log(Cart);Cart.forEach(function(e){setTotal(e.product.price*e.quantity);console.log(Total);});setLoading(false);}},[Cart]);if(Loading)return/*#__PURE__*/React.createElement(\"p\",null,\"Loading\");return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(\"div\",{className:styles.head},/*#__PURE__*/React.createElement(\"h2\",{className:styles.first},\"Product\"),/*#__PURE__*/React.createElement(\"h2\",{className:styles.second},\"Price\"),/*#__PURE__*/React.createElement(\"h2\",{className:styles.second},\"Quantity\"),/*#__PURE__*/React.createElement(\"h2\",{className:styles.second},\"Total\")),Cart.map(function(product,i){var removeFromCart=function removeFromCart(){setCart(Cart.filter(function(_,index){return index!==i;}));};return/*#__PURE__*/React.createElement(\"div\",{className:styles.row},/*#__PURE__*/React.createElement(\"div\",{className:styles.first},/*#__PURE__*/React.createElement(\"button\",{onClick:removeFromCart},\"x\"),/*#__PURE__*/React.createElement(\"img\",{draggable:\"false\",src:product.product.image,alt:\"product\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,product.product.name),/*#__PURE__*/React.createElement(\"p\",null,product.size))),/*#__PURE__*/React.createElement(\"div\",{className:styles.second},\"$\",product.product.price.toFixed(2)),/*#__PURE__*/React.createElement(\"div\",{className:styles.second},product.quantity),/*#__PURE__*/React.createElement(\"div\",{className:styles.second},\"$\",(product.quantity*product.product.price).toFixed(2)));}),/*#__PURE__*/React.createElement(\"div\",{className:styles.bill},/*#__PURE__*/React.createElement(\"div\",null,\" Total: \",/*#__PURE__*/React.createElement(\"h1\",null,\"$\",Total.toFixed(2)))));};export default Cart;","map":{"version":3,"sources":["/Users/alizahir/Documents/Programming/Web Development /Personal-projects/Winkel-eCommerce/winkel/src/Components/Cart.js"],"names":["React","useContext","useState","useEffect","styles","UserContext","firebase","Cart","setCart","Loading","setLoading","User","db","firestore","Total","setTotal","collection","doc","uid","get","then","data","cart","set","merge","console","log","forEach","e","product","price","quantity","container","head","first","second","map","i","removeFromCart","filter","_","index","row","image","name","size","toFixed","bill"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport styles from '../css/cart.module.css'\nimport UserContext from './UserContext'\nimport firebase from '../config/Firebase'\n\nconst Cart = () => {\n    const [Cart, setCart] = useState(null)\n    const [Loading, setLoading] = useState(true)\n    const { User } = useContext(UserContext)\n    const db = firebase.firestore();\n    const [Total, setTotal] = useState(0);\n\n\n    useEffect(() => {\n        if (User) {\n            db.collection('users').doc(User.uid).get()\n                .then((data) => {\n                    setCart(data.data().cart)\n                }).then(() => {\n                    setLoading(false)\n                })\n        }\n    }, [User])\n\n    useEffect(() => {\n        if (Cart) {\n            db.collection('users').doc(User.uid).set({ cart: Cart }, { merge: true });\n            console.log(Cart)\n            Cart.forEach(e => {\n                setTotal(e.product.price * e.quantity);\n                console.log(Total)\n            })\n            setLoading(false)\n        }\n    }, [Cart])\n\n    if (Loading) return <p>Loading</p>\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.head}>\n                <h2 className={styles.first}>Product</h2>\n                <h2 className={styles.second}>Price</h2>\n                <h2 className={styles.second}>Quantity</h2>\n                <h2 className={styles.second}>Total</h2>\n            </div>\n            {Cart.map((product, i) => {\n\n                const removeFromCart = () => {\n                    setCart(Cart.filter((_, index) => { return index !== i }));\n                }\n\n\n                return (\n                    <div className={styles.row}>\n                        <div className={styles.first}>\n                            <button onClick={removeFromCart}>x</button>\n                            <img draggable='false' src={product.product.image} alt=\"product\" />\n                            <div>\n                                <h3>{product.product.name}</h3>\n                                <p>{product.size}</p>\n                            </div>\n                        </div>\n                        <div className={styles.second}>${product.product.price.toFixed(2)}</div>\n                        <div className={styles.second}>{product.quantity}</div>\n                        <div className={styles.second}>${(product.quantity * product.product.price).toFixed(2)}</div>\n                    </div>\n                )\n            })}\n            <div className={styles.bill}>\n\n                <div> Total: <h1>${Total.toFixed(2)}</h1></div>\n            </div>\n        </div>\n    )\n}\n\nexport default Cart\n"]},"metadata":{},"sourceType":"module"}